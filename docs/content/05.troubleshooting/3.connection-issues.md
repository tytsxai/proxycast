---
title: 连接问题
description: 网络和代理故障排除
navigation:
  icon: i-heroicons-signal
---

# 连接问题

本页帮助你诊断和解决网络连接相关的问题。

## 诊断步骤

### 1. 检查网络连接

```bash
# 测试网络连通性
ping api.anthropic.com
ping api.openai.com
```

### 2. 检查 DNS 解析

```bash
# 测试 DNS 解析
nslookup api.anthropic.com
```

### 3. 测试 HTTPS 连接

```bash
# 测试 HTTPS 连接
curl -I https://api.anthropic.com
```

## 常见问题

### 连接超时

**症状**: 请求长时间无响应后超时

**可能原因**:
- 网络不稳定
- 防火墙阻止
- Provider 服务不可用

**解决方案**:

1. 检查网络连接
2. 检查防火墙设置
3. 尝试使用代理
4. 增加超时时间

### DNS 解析失败

**症状**: 无法解析域名

**解决方案**:

1. 检查 DNS 设置
2. 尝试使用公共 DNS（如 8.8.8.8）
3. 清除 DNS 缓存

```bash
# macOS
sudo dscacheutil -flushcache

# Windows
ipconfig /flushdns
```

### SSL/TLS 错误

**症状**: 证书验证失败

**可能原因**:
- 系统时间不正确
- 根证书过期
- 代理拦截 HTTPS

**解决方案**:

1. 同步系统时间
2. 更新系统证书
3. 检查代理设置

## 代理配置

### 设置代理

在 ProxyCast 设置中配置代理：

1. 进入 **设置** > **高级**
2. 配置代理设置：

| 选项 | 说明 |
|------|------|
| HTTP 代理 | HTTP 代理地址 |
| HTTPS 代理 | HTTPS 代理地址 |
| 不代理地址 | 排除的地址列表 |

### 代理格式

```
http://proxy.example.com:8080
http://user:password@proxy.example.com:8080
socks5://proxy.example.com:1080
```

### 环境变量

也可以通过环境变量设置：

```bash
export HTTP_PROXY=http://proxy.example.com:8080
export HTTPS_PROXY=http://proxy.example.com:8080
export NO_PROXY=localhost,127.0.0.1
```

## Provider 特定问题

### Anthropic API

**端点**: `https://api.anthropic.com`

**常见问题**:
- 某些地区可能需要代理
- 检查 API 状态页面

### Google Gemini

**端点**: `https://generativelanguage.googleapis.com`

**常见问题**:
- 需要 Google Cloud 项目
- 检查 API 是否启用

### 阿里云 Qwen

**端点**: `https://dashscope.aliyuncs.com`

**常见问题**:
- 海外访问可能需要代理
- 检查区域设置

## 防火墙设置

### 允许的端口

确保防火墙允许以下端口：

| 端口 | 用途 |
|------|------|
| 443 | HTTPS 请求 |
| 9090 | ProxyCast API（默认） |

### macOS 防火墙

1. 系统偏好设置 > 安全性与隐私
2. 防火墙 > 防火墙选项
3. 允许 ProxyCast 接收传入连接

### Windows 防火墙

1. 控制面板 > Windows Defender 防火墙
2. 允许应用通过防火墙
3. 添加 ProxyCast

## 调试模式

启用详细日志：

1. 进入 **设置** > **高级**
2. 设置日志级别为 **Debug**
3. 重现问题
4. 查看网络请求日志
