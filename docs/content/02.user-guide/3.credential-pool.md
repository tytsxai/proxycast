---
title: 凭证池
description: 管理多个 AI 服务凭证
navigation:
  icon: i-heroicons-key
---

# 凭证池

凭证池用于管理多个 AI 服务凭证，支持负载均衡和故障转移。

## 池管理界面

### 凭证列表

显示所有已添加的凭证：

| 字段 | 说明 |
|------|------|
| 名称 | 凭证标识名称 |
| Provider | 凭证类型 |
| 状态 | 有效/过期/错误 |
| 优先级 | 负载均衡优先级 |
| 操作 | 编辑/删除/测试 |

### 状态指示

- 🟢 **有效**: 凭证可正常使用
- 🟡 **即将过期**: Token 即将过期，需要刷新
- 🔴 **已过期**: Token 已过期
- ⚪ **未验证**: 尚未验证凭证有效性

## 添加凭证

### 自动检测

ProxyCast 会自动检测以下位置的凭证：

```
~/.kiro/credentials.json          # Kiro Claude
~/.config/gemini-cli/oauth_creds.json  # Gemini CLI
~/.config/qwen/credentials.json   # Qwen
```

点击 **刷新凭证** 重新扫描。

### 从文件加载

1. 点击 **添加凭证**
2. 选择 **从文件加载**
3. 选择凭证文件
4. 确认 Provider 类型

### 手动输入

1. 点击 **添加凭证**
2. 选择 **手动输入**
3. 选择 Provider 类型
4. 填写凭证信息：

**OAuth 类型 (Kiro/Gemini/Qwen):**
- Access Token
- Refresh Token
- 过期时间

**API Key 类型 (OpenAI/Claude Custom):**
- API Key
- Base URL（可选）

## 负载均衡配置

### 策略选择

| 策略 | 说明 |
|------|------|
| 轮询 (Round Robin) | 依次使用每个凭证 |
| 优先级 (Priority) | 按优先级顺序使用 |
| 随机 (Random) | 随机选择凭证 |
| 最少使用 (Least Used) | 优先使用请求数最少的凭证 |

### 优先级设置

为每个凭证设置优先级（1-100）：

- 数值越小优先级越高
- 相同优先级按策略选择
- 优先级为 0 表示禁用

### 健康检查

启用健康检查后：

- 定期验证凭证有效性
- 自动跳过失效凭证
- 凭证恢复后自动重新启用

配置选项：

| 选项 | 默认值 | 说明 |
|------|--------|------|
| 检查间隔 | 60s | 健康检查频率 |
| 失败阈值 | 3 | 连续失败次数后标记为不健康 |
| 恢复阈值 | 1 | 成功次数后恢复健康状态 |

## 凭证操作

### 测试凭证

点击 **测试** 按钮验证凭证：

1. 发送测试请求
2. 显示测试结果
3. 更新凭证状态

### 刷新 Token

对于 OAuth 凭证：

- 自动刷新：Token 过期前自动刷新
- 手动刷新：点击 **刷新** 按钮

### 删除凭证

1. 点击 **删除** 按钮
2. 确认删除操作
3. 凭证从池中移除

::alert{type="warning"}
删除凭证不会删除本地凭证文件，只是从 ProxyCast 中移除。
::
